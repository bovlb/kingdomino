var Ie=Object.defineProperty;var Ve=(e,t,n)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ae=(e,t,n)=>(Ve(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function le(){}function Se(e){return e()}function me(){return Object.create(null)}function te(e){e.forEach(Se)}function Ee(e){return typeof e=="function"}function je(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Be(e){return Object.keys(e).length===0}function Fe(e){return e??""}function D(e,t){e.appendChild(t)}function N(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function he(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function j(e){return document.createElement(e)}function B(e){return document.createTextNode(e)}function Z(){return B(" ")}function qe(){return B("")}function W(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function I(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ke(e){return Array.from(e.childNodes)}function ie(e,t){t=""+t,e.data!==t&&(e.data=t)}function X(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function O(e,t,n){e.classList.toggle(t,!!n)}let re;function oe(e){re=e}function Oe(){if(!re)throw new Error("Function called outside component initialization");return re}function He(e){Oe().$$.on_mount.push(e)}function Ue(e){Oe().$$.on_destroy.push(e)}const x=[],we=[];let ee=[];const ge=[],Ge=Promise.resolve();let _e=!1;function Je(){_e||(_e=!0,Ge.then(Ae))}function pe(e){ee.push(e)}const de=new Set;let Y=0;function Ae(){if(Y!==0)return;const e=re;do{try{for(;Y<x.length;){const t=x[Y];Y++,oe(t),Qe(t.$$)}}catch(t){throw x.length=0,Y=0,t}for(oe(null),x.length=0,Y=0;we.length;)we.pop()();for(let t=0;t<ee.length;t+=1){const n=ee[t];de.has(n)||(de.add(n),n())}ee.length=0}while(x.length);for(;ge.length;)ge.pop()();_e=!1,de.clear(),oe(e)}function Qe(e){if(e.fragment!==null){e.update(),te(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(pe)}}function We(e){const t=[],n=[];ee.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ee=t}const Xe=new Set;function Le(e,t){e&&e.i&&(Xe.delete(e),e.i(t))}function J(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ye(e,t){e.d(1),t.delete(e.key)}function Ze(e,t,n,o,l,r,s,k,g,d,y,f){let h=e.length,w=r.length,S=h;const U={};for(;S--;)U[e[S].key]=S;const E=[],F=new Map,V=new Map,P=[];for(S=w;S--;){const v=f(l,r,S),C=n(v);let R=s.get(C);R?o&&P.push(()=>R.p(v,t)):(R=d(C,v),R.c()),F.set(C,E[S]=R),C in U&&V.set(C,Math.abs(S-U[C]))}const q=new Set,T=new Set;function K(v){Le(v,1),v.m(k,y),s.set(v.key,v),y=v.first,w--}for(;h&&w;){const v=E[w-1],C=e[h-1],R=v.key,M=C.key;v===C?(y=v.first,h--,w--):F.has(M)?!s.has(R)||q.has(R)?K(v):T.has(M)?h--:V.get(R)>V.get(M)?(T.add(R),K(v)):(q.add(M),h--):(g(C,s),h--)}for(;h--;){const v=e[h];F.has(v.key)||g(v,s)}for(;w;)K(E[w-1]);return te(P),E}function xe(e,t,n){const{fragment:o,after_update:l}=e.$$;o&&o.m(t,n),pe(()=>{const r=e.$$.on_mount.map(Se).filter(Ee);e.$$.on_destroy?e.$$.on_destroy.push(...r):te(r),e.$$.on_mount=[]}),l.forEach(pe)}function et(e,t){const n=e.$$;n.fragment!==null&&(We(n.after_update),te(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(e,t){e.$$.dirty[0]===-1&&(x.push(e),Je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function nt(e,t,n,o,l,r,s=null,k=[-1]){const g=re;oe(e);const d=e.$$={fragment:null,ctx:[],props:r,update:le,not_equal:l,bound:me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(g?g.$$.context:[])),callbacks:me(),dirty:k,skip_bound:!1,root:t.target||g.$$.root};s&&s(d.root);let y=!1;if(d.ctx=n?n(e,t.props||{},(f,h,...w)=>{const S=w.length?w[0]:h;return d.ctx&&l(d.ctx[f],d.ctx[f]=S)&&(!d.skip_bound&&d.bound[f]&&d.bound[f](S),y&&tt(e,f)),h}):[],d.update(),y=!0,te(d.before_update),d.fragment=o?o(d.ctx):!1,t.target){if(t.hydrate){const f=Ke(t.target);d.fragment&&d.fragment.l(f),f.forEach(A)}else d.fragment&&d.fragment.c();t.intro&&Le(e.$$.fragment),xe(e,t.target,t.anchor),Ae()}oe(g)}class ot{constructor(){ae(this,"$$");ae(this,"$$set")}$destroy(){et(this,1),this.$destroy=le}$on(t,n){if(!Ee(n))return le;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(t){this.$$set&&!Be(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const lt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(lt);function be(e,t,n){const o=e.slice();return o[35]=t[n],o}function ye(e,t,n){const o=e.slice();return o[38]=t[n],o}function ve(e,t,n){const o=e.slice();return o[41]=t[n].tile,o[42]=t[n].row,o[43]=t[n].col,o}function ke(e,t,n){const o=e.slice();return o[46]=t[n],o}function Ce(e){let t,n,o;function l(){return e[15](e[46])}return{c(){t=j("button"),t.textContent=`${e[46]} ðŸ‘‘`,I(t,"class","svelte-h20pas"),O(t,"selected",e[2]===e[46])},m(r,s){N(r,t,s),n||(o=W(t,"click",l),n=!0)},p(r,s){e=r,s[0]&4&&O(t,"selected",e[2]===e[46])},d(r){r&&A(t),n=!1,o()}}}function $e(e){let t,n=(e[41].crowns>0?e[41].crowns:"")+"",o,l,r,s,k,g;function d(){return e[16](e[41],e[42],e[43])}function y(...h){return e[17](e[41],e[42],e[43],...h)}function f(){return e[19](e[42],e[43])}return{c(){t=j("button"),o=B(n),l=Z(),I(t,"data-row",r=e[42]),I(t,"data-col",s=e[43]),I(t,"class","tile svelte-h20pas"),O(t,"grass",e[41].terrain==="grass"),O(t,"water",e[41].terrain==="water"),O(t,"forest",e[41].terrain==="forest"),O(t,"wheat",e[41].terrain==="wheat"),O(t,"swamp",e[41].terrain==="swamp"),O(t,"mine",e[41].terrain==="mine"),O(t,"castle",e[11](e[42],e[43]))},m(h,w){N(h,t,w),D(t,o),D(t,l),k||(g=[W(t,"click",d),W(t,"pointerdown",y),W(t,"pointermove",e[18]),W(t,"pointerup",f)],k=!0)},p(h,w){e=h,w[0]&16&&n!==(n=(e[41].crowns>0?e[41].crowns:"")+"")&&ie(o,n),w[0]&16&&r!==(r=e[42])&&I(t,"data-row",r),w[0]&16&&s!==(s=e[43])&&I(t,"data-col",s),w[0]&16&&O(t,"grass",e[41].terrain==="grass"),w[0]&16&&O(t,"water",e[41].terrain==="water"),w[0]&16&&O(t,"forest",e[41].terrain==="forest"),w[0]&16&&O(t,"wheat",e[41].terrain==="wheat"),w[0]&16&&O(t,"swamp",e[41].terrain==="swamp"),w[0]&16&&O(t,"mine",e[41].terrain==="mine"),w[0]&2064&&O(t,"castle",e[11](e[42],e[43]))},d(h){h&&A(t),k=!1,te(g)}}}function Me(e){let t,n=J(e[38]),o=[];for(let l=0;l<n.length;l+=1)o[l]=$e(ve(e,n,l));return{c(){for(let l=0;l<o.length;l+=1)o[l].c();t=qe()},m(l,r){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(l,r);N(l,t,r)},p(l,r){if(r[0]&3536){n=J(l[38]);let s;for(s=0;s<n.length;s+=1){const k=ve(l,n,s);o[s]?o[s].p(k,r):(o[s]=$e(k),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(l){l&&A(t),he(o,l)}}}function Re(e,t){let n,o=t[35]+"",l,r,s;function k(){return t[20](t[35])}return{key:e,first:null,c(){n=j("button"),l=B(o),I(n,"class",Fe(t[35])+" svelte-h20pas"),O(n,"selected",t[1]===t[35]),this.first=n},m(g,d){N(g,n,d),D(n,l),r||(s=W(n,"click",k),r=!0)},p(g,d){t=g,d[0]&34&&O(n,"selected",t[1]===t[35])},d(g){g&&A(n),r=!1,s()}}}function rt(e){let t,n,o,l,r,s,k,g=[],d=new Map,y,f,h,w,S,U,E,F,V,P,q,T,K,v=J([0,1,2,3]),C=[];for(let i=0;i<4;i+=1)C[i]=Ce(ke(e,v,i));let R=J(e[4]),M=[];for(let i=0;i<R.length;i+=1)M[i]=Me(ye(e,R,i));let H=J(["empty",...e[5]]);const ne=i=>i[35];for(let i=0;i<H.length;i+=1){let b=be(e,H,i),u=ne(b);d.set(u,g[i]=Re(u,b))}return{c(){t=j("h1"),t.textContent="Kingdomino Scorer",n=Z(),o=j("div");for(let i=0;i<4;i+=1)C[i].c();l=Z(),r=j("div");for(let i=0;i<M.length;i+=1)M[i].c();s=Z(),k=j("div");for(let i=0;i<g.length;i+=1)g[i].c();y=Z(),f=j("p"),h=B("Total Score: "),w=j("strong"),S=B(e[3]),U=Z(),E=j("button"),F=B("Board Size: "),V=B(e[0]),P=B("Ã—"),q=B(e[0]),X(t,"text-align","center"),I(o,"class","crown-controls controls svelte-h20pas"),I(r,"class","board svelte-h20pas"),X(r,"grid-template-columns","repeat("+e[0]+", 1fr)"),I(k,"class","controls svelte-h20pas"),X(E,"margin-left","20px"),I(E,"class","svelte-h20pas"),X(f,"text-align","center"),X(f,"font-size","1.2rem")},m(i,b){N(i,t,b),N(i,n,b),N(i,o,b);for(let u=0;u<4;u+=1)C[u]&&C[u].m(o,null);N(i,l,b),N(i,r,b);for(let u=0;u<M.length;u+=1)M[u]&&M[u].m(r,null);N(i,s,b),N(i,k,b);for(let u=0;u<g.length;u+=1)g[u]&&g[u].m(k,null);N(i,y,b),N(i,f,b),D(f,h),D(f,w),D(w,S),D(f,U),D(f,E),D(E,F),D(E,V),D(E,P),D(E,q),T||(K=W(E,"click",e[21]),T=!0)},p(i,b){if(b[0]&4){v=J([0,1,2,3]);let u;for(u=0;u<4;u+=1){const Q=ke(i,v,u);C[u]?C[u].p(Q,b):(C[u]=Ce(Q),C[u].c(),C[u].m(o,null))}for(;u<4;u+=1)C[u].d(1)}if(b[0]&3536){R=J(i[4]);let u;for(u=0;u<R.length;u+=1){const Q=ye(i,R,u);M[u]?M[u].p(Q,b):(M[u]=Me(Q),M[u].c(),M[u].m(r,null))}for(;u<M.length;u+=1)M[u].d(1);M.length=R.length}b[0]&1&&X(r,"grid-template-columns","repeat("+i[0]+", 1fr)"),b[0]&546&&(H=J(["empty",...i[5]]),g=Ze(g,b,ne,1,i,H,d,k,Ye,Re,null,be)),b[0]&8&&ie(S,i[3]),b[0]&1&&ie(V,i[0]),b[0]&1&&ie(q,i[0])},i:le,o:le,d(i){i&&(A(t),A(n),A(o),A(l),A(r),A(s),A(k),A(y),A(f)),he(C,i),he(M,i);for(let b=0;b<g.length;b+=1)g[b].d();T=!1,K()}}}const z=13;function it(e,t,n){let o,l=!1,r=null,s=null;function k(){l=!1,r=null,s=null}He(()=>{window.addEventListener("pointerup",k),window.addEventListener("pointercancel",k)}),Ue(()=>{window.removeEventListener("pointerup",k),window.removeEventListener("pointercancel",k)});const g=["grass","water","forest","wheat","swamp","mine"];let d=Array.from({length:z},()=>Array.from({length:z},()=>({terrain:null,crowns:0}))),y=5,f={row:4,col:4},h={row:6,col:6};function w(c,a,p){v(a,p)?s={row:a,col:p}:(l=!0,r=P==="empty"?null:P,V(c,a,p))}function S(c,a){if(s){const p=c-s.row,m=a-s.col;U(h.row+p,h.col+m),s=null}l=!1,r=null}function U(c,a){const p=c-h.row,m=a-h.col,_={row:f.row-p,col:f.col-m},{minRow:$,maxRow:L,minCol:G,maxCol:se}=H(),ce=_.row,fe=_.row+y-1,ue=_.col,De=_.col+y-1;return $>=ce&&L<=fe&&G>=ue&&se<=De?(n(14,f=_),E(),!0):!1}function E(){n(13,d=[...d]),n(3,ne=M())}function F(c){if(!l||r===null)return;const a=c.currentTarget,p=parseInt(a.dataset.row??""),m=parseInt(a.dataset.col??"");if(!isNaN(p)&&!isNaN(m)){const _=d[p][m];V(_,p,m)}}function V(c,a,p){v(a,p)||l&&r!==null&&(c.terrain=r,c.crowns=Math.floor(Math.random()*4),E())}let P="grass";function q(c){n(1,P=c)}let T=null;function K(c,a,p){v(a,p)||(c.terrain=P==="empty"?null:P,T!==null&&(c.crowns=T,n(2,T=null)),E())}function v(c,a){return c===h.row&&a===h.col}function C(){const{minRow:c,maxRow:a,minCol:p,maxCol:m}=H(),_=Math.floor((c+a)/2),$=Math.floor((p+m)/2),L=h.row===_&&h.col===$,G=a-c+1===y&&m-p+1===y;return L&&G}function R(){const{minRow:c,maxRow:a,minCol:p,maxCol:m}=H(),_=a-c+1===y&&m-p+1===y;for(let $=f.row;$<f.row+y;$++)for(let L=f.col;L<f.col+y;L++)if(($!==h.row||L!==h.col)&&d[$][L].terrain===null)return!1;return _}function M(){const c=Array.from({length:z},()=>Array(z).fill(!1));let a=0;function p(m,_,$){if(m<0||m>=z||_<0||_>=z||c[m][_]||d[m][_].terrain!==$)return[0,0];c[m][_]=!0;let L=1,G=d[m][_].crowns;for(const[se,ce]of[[1,0],[-1,0],[0,1],[0,-1]]){const[fe,ue]=p(m+se,_+ce,$);L+=fe,G+=ue}return[L,G]}for(let m=0;m<z;m++)for(let _=0;_<z;_++){const $=d[m][_];if($.terrain&&!c[m][_]){const[L,G]=p(m,_,$.terrain);a+=L*G}}return a+=C()?10:0,a+=R()?5:0,a}function H(){let c=z,a=-1,p=z,m=-1;for(let _=0;_<z;_++)for(let $=0;$<z;$++)(d[_][$].terrain!==null||_===h.row&&$===h.col)&&(c=Math.min(c,_),a=Math.max(a,_),p=Math.min(p,$),m=Math.max(m,$));return{minRow:c,maxRow:a,minCol:p,maxCol:m}}let ne=0;function i(){if(y===5)n(0,y=7),f.row>0&&n(14,f.row-=1,f),f.col>0&&n(14,f.col-=1,f);else{const c=H();if(c.maxRow-c.minRow>=5||c.maxCol-c.minCol>=5)return;const a=c.maxRow<f.row+6?f.row+1:f.row,p=c.maxCol<f.col+6?f.col+1:f.col;n(14,f={row:a,col:p}),n(0,y=5)}}const b=c=>n(2,T=c),u=(c,a,p)=>K(c,a,p),Q=(c,a,p,m)=>w(c,a,p),Ne=c=>F(c),Pe=(c,a)=>S(c,a),Te=c=>q(c),ze=()=>i();return e.$$.update=()=>{e.$$.dirty[0]&24577&&n(4,o=Array.from({length:y},(c,a)=>Array.from({length:y},(p,m)=>{const _=f.row+a,$=f.col+m;return{tile:d[_][$],row:_,col:$}})))},[y,P,T,ne,o,g,w,S,F,q,K,v,i,d,f,b,u,Q,Ne,Pe,Te,ze]}class st extends ot{constructor(t){super(),nt(this,t,it,rt,je,{},null,[-1,-1])}}new st({target:document.body});
