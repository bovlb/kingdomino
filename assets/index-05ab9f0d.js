var tt=Object.defineProperty;var nt=(e,t,n)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var de=(e,t,n)=>(nt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function W(){}function Ne(e){return e()}function ve(){return Object.create(null)}function H(e){e.forEach(Ne)}function se(e){return typeof e=="function"}function ze(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ot(e){return Object.keys(e).length===0}function rt(e){return e&&se(e.destroy)?e.destroy:W}function P(e,t){e.appendChild(t)}function D(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function ie(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function V(e){return document.createElement(e)}function j(e){return document.createTextNode(e)}function I(){return j(" ")}function Ue(){return j("")}function U(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function ye(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function Y(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function lt(e){return Array.from(e.childNodes)}function re(e,t){t=""+t,e.data!==t&&(e.data=t)}function $(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function A(e,t,n){e.classList.toggle(t,!!n)}function it(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}let ne;function ee(e){ne=e}function ge(){if(!ne)throw new Error("Function called outside component initialization");return ne}function st(e){ge().$$.on_mount.push(e)}function ct(e){ge().$$.on_destroy.push(e)}function ft(){const e=ge();return(t,n,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[t];if(r){const l=it(t,n,{cancelable:o});return r.slice().forEach(c=>{c.call(e,l)}),!l.defaultPrevented}return!0}}function Ee(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o.call(this,t))}const J=[],Ce=[];let Q=[];const ke=[],ut=Promise.resolve();let he=!1;function at(){he||(he=!0,ut.then(Ve))}function me(e){Q.push(e)}const pe=new Set;let G=0;function Ve(){if(G!==0)return;const e=ne;do{try{for(;G<J.length;){const t=J[G];G++,ee(t),dt(t.$$)}}catch(t){throw J.length=0,G=0,t}for(ee(null),J.length=0,G=0;Ce.length;)Ce.pop()();for(let t=0;t<Q.length;t+=1){const n=Q[t];pe.has(n)||(pe.add(n),n())}Q.length=0}while(J.length);for(;ke.length;)ke.pop()();he=!1,pe.clear(),ee(e)}function dt(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(me)}}function pt(e){const t=[],n=[];Q.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),Q=t}const le=new Set;let X;function ht(){X={r:0,c:[],p:X}}function mt(){X.r||H(X.c),X=X.p}function te(e,t){e&&e.i&&(le.delete(e),e.i(t))}function _e(e,t,n,o){if(e&&e.o){if(le.has(e))return;le.add(e),X.c.push(()=>{le.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function K(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function _t(e){e&&e.c()}function $e(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),me(()=>{const l=e.$$.on_mount.map(Ne).filter(se);e.$$.on_destroy?e.$$.on_destroy.push(...l):H(l),e.$$.on_mount=[]}),r.forEach(me)}function je(e,t){const n=e.$$;n.fragment!==null&&(pt(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(e,t){e.$$.dirty[0]===-1&&(J.push(e),at(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function qe(e,t,n,o,r,l,c=null,y=[-1]){const O=ne;ee(e);const g=e.$$={fragment:null,ctx:[],props:l,update:W,not_equal:r,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(O?O.$$.context:[])),callbacks:ve(),dirty:y,skip_bound:!1,root:t.target||O.$$.root};c&&c(g.root);let m=!1;if(g.ctx=n?n(e,t.props||{},(v,b,...f)=>{const a=f.length?f[0]:b;return g.ctx&&r(g.ctx[v],g.ctx[v]=a)&&(!g.skip_bound&&g.bound[v]&&g.bound[v](a),m&&gt(e,v)),b}):[],g.update(),m=!0,H(g.before_update),g.fragment=o?o(g.ctx):!1,t.target){if(t.hydrate){const v=lt(t.target);g.fragment&&g.fragment.l(v),v.forEach(S)}else g.fragment&&g.fragment.c();t.intro&&te(e.$$.fragment),$e(e,t.target,t.anchor),Ve()}ee(O)}class Be{constructor(){de(this,"$$");de(this,"$$set")}$destroy(){je(this,1),this.$destroy=W}$on(t,n){if(!se(n))return W;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!ot(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const wt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(wt);function Le(e,t,n){const o=e.slice();return o[16]=t[n],o[18]=n,o}function Re(e,t,n){const o=e.slice();return o[19]=t[n],o[18]=n,o}function Oe(e){let t,n,o;function r(){return e[13](e[19])}return{c(){t=V("button"),t.textContent=`${e[19]}`,Y(t,"class","crown crown-"+e[18]+" svelte-32s1df")},m(l,c){D(l,t,c),n||(o=U(t,"click",r),n=!0)},p(l,c){e=l},d(l){l&&S(t),n=!1,o()}}}function Te(e){let t,n,o;function r(){return e[14](e[16])}return{c(){t=V("button"),t.textContent=`${e[16]}`,Y(t,"class","terrain terrain-"+e[18]+" svelte-32s1df"),A(t,"grass",e[16]==="grass"),A(t,"water",e[16]==="water"),A(t,"forest",e[16]==="forest"),A(t,"desert",e[16]==="desert"),A(t,"swamp",e[16]==="swamp"),A(t,"mine",e[16]==="mine")},m(l,c){D(l,t,c),n||(o=U(t,"click",r),n=!0)},p(l,c){e=l},d(l){l&&S(t),n=!1,o()}}}function bt(e){let t,n,o,r,l,c,y,O,g=K(e[3]),m=[];for(let f=0;f<g.length;f+=1)m[f]=Oe(Re(e,g,f));let v=K(e[2]),b=[];for(let f=0;f<v.length;f+=1)b[f]=Te(Le(e,v,f));return{c(){t=V("div"),n=I(),o=V("div"),r=V("button"),r.textContent="🗑️",l=I();for(let f=0;f<m.length;f+=1)m[f].c();c=I();for(let f=0;f<b.length;f+=1)b[f].c();Y(t,"class","overlay svelte-32s1df"),Y(r,"class","center svelte-32s1df"),Y(o,"class","editor svelte-32s1df"),$(o,"left",e[0]+"px"),$(o,"top",e[1]+"px")},m(f,a){D(f,t,a),D(f,n,a),D(f,o,a),P(o,r),P(o,l);for(let i=0;i<m.length;i+=1)m[i]&&m[i].m(o,null);P(o,c);for(let i=0;i<b.length;i+=1)b[i]&&b[i].m(o,null);y||(O=[U(t,"pointerdown",e[12]),U(r,"click",e[6]),U(o,"click",ye(e[10])),U(o,"pointerdown",ye(e[11]))],y=!0)},p(f,[a]){if(a&40){g=K(f[3]);let i;for(i=0;i<g.length;i+=1){const p=Re(f,g,i);m[i]?m[i].p(p,a):(m[i]=Oe(p),m[i].c(),m[i].m(o,c))}for(;i<m.length;i+=1)m[i].d(1);m.length=g.length}if(a&20){v=K(f[2]);let i;for(i=0;i<v.length;i+=1){const p=Le(f,v,i);b[i]?b[i].p(p,a):(b[i]=Te(p),b[i].c(),b[i].m(o,null))}for(;i<b.length;i+=1)b[i].d(1);b.length=v.length}a&1&&$(o,"left",f[0]+"px"),a&2&&$(o,"top",f[1]+"px")},i:W,o:W,d(f){f&&(S(t),S(n),S(o)),ie(m,f),ie(b,f),y=!1,H(O)}}}function vt(e,t,n){const o=ft();let{tile:r}=t,{x:l=0}=t,{y:c=0}=t,{onUpdate:y}=t;const O=["grass","water","forest","desert","swamp","mine"],g=[0,1,2,3];function m(E){y({terrain:E})}function v(E){y({crowns:E})}function b(){y({terrain:null,crowns:0}),onClose()}function f(){o("close")}function a(E){Ee.call(this,e,E)}function i(E){Ee.call(this,e,E)}const p=()=>f(),k=E=>v(E),q=E=>m(E);return e.$$set=E=>{"tile"in E&&n(8,r=E.tile),"x"in E&&n(0,l=E.x),"y"in E&&n(1,c=E.y),"onUpdate"in E&&n(9,y=E.onUpdate)},[l,c,O,g,m,v,b,f,r,y,a,i,p,k,q]}class yt extends Be{constructor(t){super(),qe(this,t,vt,bt,ze,{tile:8,x:0,y:1,onUpdate:9})}}function Et(e,t,n=500){let o;function r(c){o=setTimeout(()=>t(c),n)}function l(){clearTimeout(o)}return e.addEventListener("pointerdown",r),e.addEventListener("pointerup",l),e.addEventListener("pointerleave",l),e.addEventListener("pointercancel",l),{destroy(){l(),e.removeEventListener("pointerdown",r),e.removeEventListener("pointerup",l),e.removeEventListener("pointerleave",l),e.removeEventListener("pointercancel",l)}}}function Ae(e,t,n){const o=e.slice();return o[41]=t[n],o}function Me(e,t,n){const o=e.slice();return o[44]=t[n].tile,o[45]=t[n].row,o[46]=t[n].col,o}function Se(e){let t,n=(e[44].crowns>0?e[44].crowns:"")+"",o,r,l,c,y;function O(...a){return e[17](e[44],e[45],e[46],...a)}function g(...a){return e[18](e[44],e[45],e[46],...a)}function m(){return e[19](e[44],e[45],e[46])}function v(){return e[20](e[45],e[46])}function b(...a){return e[21](e[44],e[45],e[46],...a)}function f(...a){return e[22](e[44],e[45],e[46],...a)}return{c(){t=V("button"),o=j(n),r=I(),Y(t,"class","tile svelte-8q93dc"),A(t,"grass",e[44].terrain==="grass"),A(t,"water",e[44].terrain==="water"),A(t,"forest",e[44].terrain==="forest"),A(t,"desert",e[44].terrain==="desert"),A(t,"swamp",e[44].terrain==="swamp"),A(t,"mine",e[44].terrain==="mine"),A(t,"castle",e[13](e[45],e[46]))},m(a,i){D(a,t,i),P(t,o),P(t,r),c||(y=[U(t,"click",O),U(t,"pointerdown",g),U(t,"pointerenter",m),U(t,"pointerup",v),rt(l=Et.call(null,t,b)),U(t,"contextmenu",f)],c=!0)},p(a,i){e=a,i[0]&64&&n!==(n=(e[44].crowns>0?e[44].crowns:"")+"")&&re(o,n),l&&se(l.update)&&i[0]&64&&l.update.call(null,b),i[0]&64&&A(t,"grass",e[44].terrain==="grass"),i[0]&64&&A(t,"water",e[44].terrain==="water"),i[0]&64&&A(t,"forest",e[44].terrain==="forest"),i[0]&64&&A(t,"desert",e[44].terrain==="desert"),i[0]&64&&A(t,"swamp",e[44].terrain==="swamp"),i[0]&64&&A(t,"mine",e[44].terrain==="mine"),i[0]&8256&&A(t,"castle",e[13](e[45],e[46]))},d(a){a&&S(t),c=!1,H(y)}}}function Pe(e){let t,n=K(e[41]),o=[];for(let r=0;r<n.length;r+=1)o[r]=Se(Me(e,n,r));return{c(){for(let r=0;r<o.length;r+=1)o[r].c();t=Ue()},m(r,l){for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(r,l);D(r,t,l)},p(r,l){if(l[0]&16064){n=K(r[41]);let c;for(c=0;c<n.length;c+=1){const y=Me(r,n,c);o[c]?o[c].p(y,l):(o[c]=Se(y),o[c].c(),o[c].m(t.parentNode,t))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}},d(r){r&&S(t),ie(o,r)}}}function De(e){let t,n;return t=new yt({props:{tile:e[2],x:e[3],y:e[4],onUpdate:e[24]}}),t.$on("close",e[25]),{c(){_t(t.$$.fragment)},m(o,r){$e(t,o,r),n=!0},p(o,r){const l={};r[0]&4&&(l.tile=o[2]),r[0]&8&&(l.x=o[3]),r[0]&16&&(l.y=o[4]),r[0]&2&&(l.onUpdate=o[24]),t.$set(l)},i(o){n||(te(t.$$.fragment,o),n=!0)},o(o){_e(t.$$.fragment,o),n=!1},d(o){je(t,o)}}}function Ct(e){let t,n,o,r,l,c,y,O,g,m,v,b,f,a,i,p,k,q,E,B=K(e[6]),T=[];for(let _=0;_<B.length;_+=1)T[_]=Pe(Ae(e,B,_));let R=e[1]&&De(e);return{c(){t=V("h1"),t.textContent="Kingdomino Scorer",n=I(),o=V("div");for(let _=0;_<T.length;_+=1)T[_].c();r=I(),l=V("p"),c=j("Total Score: "),y=V("strong"),O=j(e[5]),g=I(),m=V("button"),v=j("Board Size: "),b=j(e[0]),f=j("×"),a=j(e[0]),i=I(),R&&R.c(),p=Ue(),$(t,"text-align","center"),Y(o,"class","board svelte-8q93dc"),$(o,"grid-template-columns","repeat("+e[0]+", 1fr)"),$(m,"margin-left","20px"),$(l,"text-align","center"),$(l,"font-size","1.2rem")},m(_,M){D(_,t,M),D(_,n,M),D(_,o,M);for(let L=0;L<T.length;L+=1)T[L]&&T[L].m(o,null);D(_,r,M),D(_,l,M),P(l,c),P(l,y),P(y,O),P(l,g),P(l,m),P(m,v),P(m,b),P(m,f),P(m,a),D(_,i,M),R&&R.m(_,M),D(_,p,M),k=!0,q||(E=U(m,"click",e[23]),q=!0)},p(_,M){if(M[0]&16064){B=K(_[6]);let L;for(L=0;L<B.length;L+=1){const Z=Ae(_,B,L);T[L]?T[L].p(Z,M):(T[L]=Pe(Z),T[L].c(),T[L].m(o,null))}for(;L<T.length;L+=1)T[L].d(1);T.length=B.length}(!k||M[0]&1)&&$(o,"grid-template-columns","repeat("+_[0]+", 1fr)"),(!k||M[0]&32)&&re(O,_[5]),(!k||M[0]&1)&&re(b,_[0]),(!k||M[0]&1)&&re(a,_[0]),_[1]?R?(R.p(_,M),M[0]&2&&te(R,1)):(R=De(_),R.c(),te(R,1),R.m(p.parentNode,p)):R&&(ht(),_e(R,1,1,()=>{R=null}),mt())},i(_){k||(te(R),k=!0)},o(_){_e(R),k=!1},d(_){_&&(S(t),S(n),S(o),S(r),S(l),S(i),S(p)),ie(T,_),R&&R.d(_),q=!1,E()}}}const z=13;function kt(e,t,n){let o,r=!1,l=null,c=null;st(()=>{function s(){r=!1,l=null,c=null}window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),ct(()=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)})});let y=!1,O=null,g=0,m=0;function v(s,u,h,d){x(u,h)||(n(2,O=s),n(1,y=!0),n(3,g=d.clientX),n(4,m=d.clientY))}function b(s){O&&(Object.assign(O,s),n(15,a=[...a]))}const f=["grass","water","forest","desert","swamp","mine"];let a=Array.from({length:z},()=>Array.from({length:z},()=>({terrain:null,crowns:0}))),i=5,p={row:4,col:4},k={row:6,col:6};function q(s,u,h){x(u,h)?c={row:u,col:h}:s.terrain&&(r=!0,l=s.terrain)}function E(s,u){if(c){const h=s-c.row,d=u-c.col;B(k.row+h,k.col+d),c=null}r=!1,l=null}function B(s,u){const h=s-k.row,d=u-k.col,w={row:p.row-h,col:p.col-d},{minRow:C,maxRow:N,minCol:F,maxCol:ce}=oe(),fe=w.row,ue=w.row+i-1,ae=w.col,et=w.col+i-1;return C>=fe&&N<=ue&&F>=ae&&ce<=et?(n(16,p=w),T(),!0):!1}function T(){n(15,a),n(5,we=Ke())}function R(s,u,h){x(u,h)||r&&l!==null&&(s.terrain=l,T())}function _(s){const u=f.indexOf(s.terrain);s.terrain=f[(u+1)%f.length],T()}function M(s){s.crowns=(s.crowns+1)%4,T()}let L=null;function Z(s,u,h){x(u,h)||(L?(clearTimeout(L),L=null,M(s)):L=setTimeout(()=>{_(s),L=null},250))}function x(s,u){return s===k.row&&u===k.col}function Fe(){const{minRow:s,maxRow:u,minCol:h,maxCol:d}=oe(),w=Math.floor((s+u)/2),C=Math.floor((h+d)/2),N=k.row===w&&k.col===C,F=u-s+1===i&&d-h+1===i;return N&&F}function Ie(){const{minRow:s,maxRow:u,minCol:h,maxCol:d}=oe(),w=u-s+1===i&&d-h+1===i;for(let C=p.row;C<p.row+i;C++)for(let N=p.col;N<p.col+i;N++)if((C!==k.row||N!==k.col)&&a[C][N].terrain===null)return!1;return w}function Ke(){const s=Array.from({length:z},()=>Array(z).fill(!1));let u=0;function h(d,w,C){if(d<0||d>=z||w<0||w>=z||s[d][w]||a[d][w].terrain!==C)return[0,0];s[d][w]=!0;let N=1,F=a[d][w].crowns;for(const[ce,fe]of[[1,0],[-1,0],[0,1],[0,-1]]){const[ue,ae]=h(d+ce,w+fe,C);N+=ue,F+=ae}return[N,F]}for(let d=0;d<z;d++)for(let w=0;w<z;w++){const C=a[d][w];if(C.terrain&&!s[d][w]){const[N,F]=h(d,w,C.terrain);u+=N*F}}return u+=Fe()?10:0,u+=Ie()?5:0,u}function oe(){let s=z,u=-1,h=z,d=-1;for(let w=0;w<z;w++)for(let C=0;C<z;C++)(a[w][C].terrain!==null||w===k.row&&C===k.col)&&(s=Math.min(s,w),u=Math.max(u,w),h=Math.min(h,C),d=Math.max(d,C));return{minRow:s,maxRow:u,minCol:h,maxCol:d}}let we=0;function be(){if(i===5)n(0,i=7),p.row>0&&n(16,p.row-=1,p),p.col>0&&n(16,p.col-=1,p);else{const s=oe();if(s.maxRow-s.minRow>=5||s.maxCol-s.minCol>=5)return;const u=s.maxRow<p.row+6?p.row+1:p.row,h=s.maxCol<p.col+6?p.col+1:p.col;n(16,p={row:u,col:h}),n(0,i=5)}}const Xe=(s,u,h,d)=>Z(s,u,h),Ye=(s,u,h,d)=>q(s,u,h),He=(s,u,h)=>R(s,u,h),Ge=(s,u)=>E(s,u),Je=(s,u,h,d)=>v(s,u,h,d),Qe=(s,u,h,d)=>{d.preventDefault(),v(s,u,h,d)},We=()=>be(),Ze=s=>{b(s),n(1,y=!1)},xe=()=>n(1,y=!1);return e.$$.update=()=>{e.$$.dirty[0]&98305&&n(6,o=Array.from({length:i},(s,u)=>Array.from({length:i},(h,d)=>{const w=p.row+u,C=p.col+d;return{tile:a[w][C],row:w,col:C}})))},[i,y,O,g,m,we,o,v,b,q,E,R,Z,x,be,a,p,Xe,Ye,He,Ge,Je,Qe,We,Ze,xe]}class Lt extends Be{constructor(t){super(),qe(this,t,kt,Ct,ze,{},null,[-1,-1])}}new Lt({target:document.body});
