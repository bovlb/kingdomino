var Be=Object.defineProperty;var qe=(e,t,n)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pe=(e,t,n)=>(qe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function fe(){}function Pe(e){return e()}function ve(){return Object.create(null)}function re(e){e.forEach(Pe)}function De(e){return typeof e=="function"}function Ke(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Xe(e){return Object.keys(e).length===0}function Ye(e){return e??""}function T(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function ae(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function V(e){return document.createElement(e)}function q(e){return document.createTextNode(e)}function x(){return q(" ")}function He(){return q("")}function ee(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function j(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ue(e){return Array.from(e.childNodes)}function se(e,t){t=""+t,e.data!==t&&(e.data=t)}function te(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function R(e,t,n){e.classList.toggle(t,!!n)}let ue;function ce(e){ue=e}function ze(){if(!ue)throw new Error("Function called outside component initialization");return ue}function Ge(e){ze().$$.on_mount.push(e)}function Je(e){ze().$$.on_destroy.push(e)}const oe=[],ye=[];let le=[];const ke=[],Qe=Promise.resolve();let ge=!1;function We(){ge||(ge=!0,Qe.then(Ie))}function be(e){le.push(e)}const we=new Set;let ne=0;function Ie(){if(ne!==0)return;const e=ue;do{try{for(;ne<oe.length;){const t=oe[ne];ne++,ce(t),Ze(t.$$)}}catch(t){throw oe.length=0,ne=0,t}for(ce(null),oe.length=0,ne=0;ye.length;)ye.pop()();for(let t=0;t<le.length;t+=1){const n=le[t];we.has(n)||(we.add(n),n())}le.length=0}while(oe.length);for(;ke.length;)ke.pop()();ge=!1,we.clear(),ce(e)}function Ze(e){if(e.fragment!==null){e.update(),re(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(be)}}function xe(e){const t=[],n=[];le.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),le=t}const et=new Set;function Te(e,t){e&&e.i&&(et.delete(e),e.i(t))}function X(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function tt(e,t){e.d(1),t.delete(e.key)}function nt(e,t,n,o,r,s,f,k,w,b,P,d){let a=e.length,h=s.length,v=a;const Y={};for(;v--;)Y[e[v].key]=v;const S=[],J=new Map,B=new Map,Q=[];for(v=h;v--;){const y=d(r,s,v),A=n(y);let C=f.get(A);C?o&&Q.push(()=>C.p(y,t)):(C=b(A,y),C.c()),J.set(A,S[v]=C),A in Y&&B.set(A,Math.abs(v-Y[A]))}const H=new Set,D=new Set;function z(y){Te(y,1),y.m(k,P),f.set(y.key,y),P=y.first,h--}for(;a&&h;){const y=S[h-1],A=e[a-1],C=y.key,M=A.key;y===A?(P=y.first,a--,h--):J.has(M)?!f.has(C)||H.has(C)?z(y):D.has(M)?a--:B.get(C)>B.get(M)?(D.add(C),z(y)):(H.add(M),a--):(w(A,f),a--)}for(;a--;){const y=e[a];J.has(y.key)||w(y,f)}for(;h;)z(S[h-1]);return re(Q),S}function ot(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),be(()=>{const s=e.$$.on_mount.map(Pe).filter(De);e.$$.on_destroy?e.$$.on_destroy.push(...s):re(s),e.$$.on_mount=[]}),r.forEach(be)}function lt(e,t){const n=e.$$;n.fragment!==null&&(xe(n.after_update),re(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(e,t){e.$$.dirty[0]===-1&&(oe.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function it(e,t,n,o,r,s,f=null,k=[-1]){const w=ue;ce(e);const b=e.$$={fragment:null,ctx:[],props:s,update:fe,not_equal:r,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(w?w.$$.context:[])),callbacks:ve(),dirty:k,skip_bound:!1,root:t.target||w.$$.root};f&&f(b.root);let P=!1;if(b.ctx=n?n(e,t.props||{},(d,a,...h)=>{const v=h.length?h[0]:a;return b.ctx&&r(b.ctx[d],b.ctx[d]=v)&&(!b.skip_bound&&b.bound[d]&&b.bound[d](v),P&&rt(e,d)),a}):[],b.update(),P=!0,re(b.before_update),b.fragment=o?o(b.ctx):!1,t.target){if(t.hydrate){const d=Ue(t.target);b.fragment&&b.fragment.l(d),d.forEach(O)}else b.fragment&&b.fragment.c();t.intro&&Te(e.$$.fragment),ot(e,t.target,t.anchor),Ie()}ce(w)}class st{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){lt(this,1),this.$destroy=fe}$on(t,n){if(!De(n))return fe;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!Xe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ct="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ct);function $e(e,t,n){const o=e.slice();return o[37]=t[n],o}function Ce(e,t,n){const o=e.slice();return o[40]=t[n],o}function Me(e,t,n){const o=e.slice();return o[43]=t[n],o}function Re(e,t,n){const o=e.slice();return o[46]=t[n].tile,o[47]=t[n].row,o[48]=t[n].col,o}function Se(e,t,n){const o=e.slice();return o[51]=t[n],o}function Ne(e){let t,n,o;function r(){return e[16](e[51])}return{c(){t=V("button"),t.textContent=`${e[51]} ðŸ‘‘`,j(t,"class","svelte-1uedvde"),R(t,"selected",e[3]===e[51])},m(s,f){L(s,t,f),n||(o=ee(t,"click",r),n=!0)},p(s,f){e=s,f[0]&8&&R(t,"selected",e[3]===e[51])},d(s){s&&O(t),n=!1,o()}}}function Ee(e){let t,n=(e[46].crowns>0?e[46].crowns:"")+"",o,r,s,f,k,w;function b(){return e[17](e[46],e[47],e[48])}function P(...d){return e[18](e[46],e[47],e[48],...d)}return{c(){t=V("button"),o=q(n),r=x(),j(t,"data-row",s=e[47]),j(t,"data-col",f=e[48]),j(t,"class","tile svelte-1uedvde"),R(t,"grass",e[46].terrain==="grass"),R(t,"water",e[46].terrain==="water"),R(t,"forest",e[46].terrain==="forest"),R(t,"wheat",e[46].terrain==="wheat"),R(t,"swamp",e[46].terrain==="swamp"),R(t,"mine",e[46].terrain==="mine"),R(t,"castle",e[12](e[47],e[48]))},m(d,a){L(d,t,a),T(t,o),T(t,r),k||(w=[ee(t,"click",b),ee(t,"pointerdown",P),ee(t,"pointermove",e[19]),ee(t,"pointerup",e[20])],k=!0)},p(d,a){e=d,a[0]&32&&n!==(n=(e[46].crowns>0?e[46].crowns:"")+"")&&se(o,n),a[0]&32&&s!==(s=e[47])&&j(t,"data-row",s),a[0]&32&&f!==(f=e[48])&&j(t,"data-col",f),a[0]&32&&R(t,"grass",e[46].terrain==="grass"),a[0]&32&&R(t,"water",e[46].terrain==="water"),a[0]&32&&R(t,"forest",e[46].terrain==="forest"),a[0]&32&&R(t,"wheat",e[46].terrain==="wheat"),a[0]&32&&R(t,"swamp",e[46].terrain==="swamp"),a[0]&32&&R(t,"mine",e[46].terrain==="mine"),a[0]&4128&&R(t,"castle",e[12](e[47],e[48]))},d(d){d&&O(t),k=!1,re(w)}}}function Oe(e){let t,n=X(e[43]),o=[];for(let r=0;r<n.length;r+=1)o[r]=Ee(Re(e,n,r));return{c(){for(let r=0;r<o.length;r+=1)o[r].c();t=He()},m(r,s){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(r,s);L(r,t,s)},p(r,s){if(s[0]&7072){n=X(r[43]);let f;for(f=0;f<n.length;f+=1){const k=Re(r,n,f);o[f]?o[f].p(k,s):(o[f]=Ee(k),o[f].c(),o[f].m(t.parentNode,t))}for(;f<o.length;f+=1)o[f].d(1);o.length=n.length}},d(r){r&&O(t),ae(o,r)}}}function Ae(e,t){let n,o=t[40]+"",r,s,f;function k(){return t[21](t[40])}return{key:e,first:null,c(){n=V("button"),r=q(o),j(n,"class",Ye(t[40])+" svelte-1uedvde"),R(n,"selected",t[2]===t[40]),this.first=n},m(w,b){L(w,n,b),T(n,r),s||(f=ee(n,"click",k),s=!0)},p(w,b){t=w,b[0]&68&&R(n,"selected",t[2]===t[40])},d(w){w&&O(n),s=!1,f()}}}function Le(e){let t,n=e[37]+"",o;return{c(){t=V("div"),o=q(n)},m(r,s){L(r,t,s),T(t,o)},p(r,s){s[0]&2&&n!==(n=r[37]+"")&&se(o,n)},d(r){r&&O(t)}}}function ft(e){let t,n,o,r,s,f,k,w=[],b=new Map,P,d,a,h,v,Y,S,J,B,Q,H,D,z,y,A,C=X([0,1,2,3]),M=[];for(let l=0;l<4;l+=1)M[l]=Ne(Se(e,C,l));let W=X(e[5]),N=[];for(let l=0;l<W.length;l+=1)N[l]=Oe(Me(e,W,l));let U=X(["empty",...e[6]]);const ie=l=>l[40];for(let l=0;l<U.length;l+=1){let g=Ce(e,U,l),i=ie(g);b.set(i,w[l]=Ae(i,g))}let G=X(e[1]),E=[];for(let l=0;l<G.length;l+=1)E[l]=Le($e(e,G,l));return{c(){t=V("h1"),t.textContent="Kingdomino Scorer",n=x(),o=V("div");for(let l=0;l<4;l+=1)M[l].c();r=x(),s=V("div");for(let l=0;l<N.length;l+=1)N[l].c();f=x(),k=V("div");for(let l=0;l<w.length;l+=1)w[l].c();P=x(),d=V("p"),a=q("Total Score: "),h=V("strong"),v=q(e[4]),Y=x(),S=V("button"),J=q("Board Size: "),B=q(e[0]),Q=q("Ã—"),H=q(e[0]),D=x(),z=V("div");for(let l=0;l<E.length;l+=1)E[l].c();te(t,"text-align","center"),j(o,"class","crown-controls controls svelte-1uedvde"),j(s,"class","board svelte-1uedvde"),te(s,"grid-template-columns","repeat("+e[0]+", 1fr)"),j(k,"class","controls svelte-1uedvde"),te(S,"margin-left","20px"),j(S,"class","svelte-1uedvde"),te(d,"text-align","center"),te(d,"font-size","1.2rem"),j(z,"class","debug-log svelte-1uedvde")},m(l,g){L(l,t,g),L(l,n,g),L(l,o,g);for(let i=0;i<4;i+=1)M[i]&&M[i].m(o,null);L(l,r,g),L(l,s,g);for(let i=0;i<N.length;i+=1)N[i]&&N[i].m(s,null);L(l,f,g),L(l,k,g);for(let i=0;i<w.length;i+=1)w[i]&&w[i].m(k,null);L(l,P,g),L(l,d,g),T(d,a),T(d,h),T(h,v),T(d,Y),T(d,S),T(S,J),T(S,B),T(S,Q),T(S,H),L(l,D,g),L(l,z,g);for(let i=0;i<E.length;i+=1)E[i]&&E[i].m(z,null);y||(A=ee(S,"click",e[22]),y=!0)},p(l,g){if(g[0]&8){C=X([0,1,2,3]);let i;for(i=0;i<4;i+=1){const K=Se(l,C,i);M[i]?M[i].p(K,g):(M[i]=Ne(K),M[i].c(),M[i].m(o,null))}for(;i<4;i+=1)M[i].d(1)}if(g[0]&7072){W=X(l[5]);let i;for(i=0;i<W.length;i+=1){const K=Me(l,W,i);N[i]?N[i].p(K,g):(N[i]=Oe(K),N[i].c(),N[i].m(s,null))}for(;i<N.length;i+=1)N[i].d(1);N.length=W.length}if(g[0]&1&&te(s,"grid-template-columns","repeat("+l[0]+", 1fr)"),g[0]&1092&&(U=X(["empty",...l[6]]),w=nt(w,g,ie,1,l,U,b,k,tt,Ae,null,Ce)),g[0]&16&&se(v,l[4]),g[0]&1&&se(B,l[0]),g[0]&1&&se(H,l[0]),g[0]&2){G=X(l[1]);let i;for(i=0;i<G.length;i+=1){const K=$e(l,G,i);E[i]?E[i].p(K,g):(E[i]=Le(K),E[i].c(),E[i].m(z,null))}for(;i<E.length;i+=1)E[i].d(1);E.length=G.length}},i:fe,o:fe,d(l){l&&(O(t),O(n),O(o),O(r),O(s),O(f),O(k),O(P),O(d),O(D),O(z)),ae(M,l),ae(N,l);for(let g=0;g<w.length;g+=1)w[g].d();ae(E,l),y=!1,A()}}}const F=13;function ut(e,t,n){let o,r=[];function s(c){n(1,r=[...r,c].slice(-10))}let f=!1,k=null,w=null;function b(){f=!1,k=null,w=null}Ge(()=>{window.addEventListener("pointerup",b),window.addEventListener("pointercancel",b)}),Je(()=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",b)});const P=["grass","water","forest","wheat","swamp","mine"];let d=Array.from({length:F},()=>Array.from({length:F},()=>({terrain:null,crowns:0}))),a=5,h={row:4,col:4},v={row:6,col:6};function Y(c,u,_){s(`beginDrag: ${u}, ${_}`),C(u,_)?w={row:u,col:_}:(f=!0,k=D==="empty"?null:D,H(c,u,_))}function S(c){const u=document.elementFromPoint(c.clientX,c.clientY);if(!(u!=null&&u.dataset))return;const _=parseInt(u.dataset.row??""),p=parseInt(u.dataset.col??"");if(!(isNaN(_)||isNaN(p))){if(s(`endDrag: ${_}, ${p}`),w){const m=_-w.row,$=p-w.col;J(v.row+m,v.col+$),w=null}f=!1,k=null}}function J(c,u){const _=c-v.row,p=u-v.col,m={row:h.row-_,col:h.col-p},{minRow:$,maxRow:I,minCol:Z,maxCol:de}=U(),he=m.row,_e=m.row+a-1,me=m.col,je=m.col+a-1;return $>=he&&I<=_e&&Z>=me&&de<=je?(n(15,h=m),B(),!0):!1}function B(){n(14,d=[...d]),n(4,ie=N())}function Q(c){if(!f||k===null)return;const u=document.elementFromPoint(c.clientX,c.clientY);if(!(u!=null&&u.dataset))return;const _=parseInt(u.dataset.row??""),p=parseInt(u.dataset.col??"");if(isNaN(_)||isNaN(p))return;const m=d[_][p];H(m,_,p)}function H(c,u,_){s(`applyDrag: ${u}, ${_}`),!C(u,_)&&f&&k!==null&&(c.terrain=k,B())}let D="grass";function z(c){n(2,D=c)}let y=null;function A(c,u,_){C(u,_)||(c.terrain=D==="empty"?null:D,y!==null&&(c.crowns=y,n(3,y=null)),B())}function C(c,u){return c===v.row&&u===v.col}function M(){const{minRow:c,maxRow:u,minCol:_,maxCol:p}=U(),m=Math.floor((c+u)/2),$=Math.floor((_+p)/2),I=v.row===m&&v.col===$,Z=u-c+1===a&&p-_+1===a;return I&&Z}function W(){const{minRow:c,maxRow:u,minCol:_,maxCol:p}=U(),m=u-c+1===a&&p-_+1===a;for(let $=h.row;$<h.row+a;$++)for(let I=h.col;I<h.col+a;I++)if(($!==v.row||I!==v.col)&&d[$][I].terrain===null)return!1;return m}function N(){const c=Array.from({length:F},()=>Array(F).fill(!1));let u=0;function _(p,m,$){if(p<0||p>=F||m<0||m>=F||c[p][m]||d[p][m].terrain!==$)return[0,0];c[p][m]=!0;let I=1,Z=d[p][m].crowns;for(const[de,he]of[[1,0],[-1,0],[0,1],[0,-1]]){const[_e,me]=_(p+de,m+he,$);I+=_e,Z+=me}return[I,Z]}for(let p=0;p<F;p++)for(let m=0;m<F;m++){const $=d[p][m];if($.terrain&&!c[p][m]){const[I,Z]=_(p,m,$.terrain);u+=I*Z}}return u+=M()?10:0,u+=W()?5:0,u}function U(){let c=F,u=-1,_=F,p=-1;for(let m=0;m<F;m++)for(let $=0;$<F;$++)(d[m][$].terrain!==null||m===v.row&&$===v.col)&&(c=Math.min(c,m),u=Math.max(u,m),_=Math.min(_,$),p=Math.max(p,$));return{minRow:c,maxRow:u,minCol:_,maxCol:p}}let ie=0;function G(){if(a===5)n(0,a=7),h.row>0&&n(15,h.row-=1,h),h.col>0&&n(15,h.col-=1,h);else{const c=U();if(c.maxRow-c.minRow>=5||c.maxCol-c.minCol>=5)return;const u=c.maxRow<h.row+6?h.row+1:h.row,_=c.maxCol<h.col+6?h.col+1:h.col;n(15,h={row:u,col:_}),n(0,a=5)}}const E=c=>n(3,y=c),l=(c,u,_)=>A(c,u,_),g=(c,u,_,p)=>Y(c,u,_),i=c=>Q(c),K=c=>S(c),Fe=c=>z(c),Ve=()=>G();return e.$$.update=()=>{e.$$.dirty[0]&49153&&n(5,o=Array.from({length:a},(c,u)=>Array.from({length:a},(_,p)=>{const m=h.row+u,$=h.col+p;return{tile:d[m][$],row:m,col:$}})))},[a,r,D,y,ie,o,P,Y,S,Q,z,A,C,G,d,h,E,l,g,i,K,Fe,Ve]}class at extends st{constructor(t){super(),it(this,t,ut,ft,Ke,{},null,[-1,-1])}}new at({target:document.body});
