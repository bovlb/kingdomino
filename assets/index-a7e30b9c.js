var je=Object.defineProperty;var Be=(e,t,n)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pe=(e,t,n)=>(Be(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function re(){}function Pe(e){return e()}function ve(){return Object.create(null)}function ie(e){e.forEach(Pe)}function ze(e){return typeof e=="function"}function qe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ke(e){return Object.keys(e).length===0}function Xe(e){return e??""}function F(e,t){e.appendChild(t)}function z(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function ue(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function V(e){return document.createElement(e)}function Y(e){return document.createTextNode(e)}function x(){return Y(" ")}function Ye(){return Y("")}function ee(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function j(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function He(e){return Array.from(e.childNodes)}function ae(e,t){t=""+t,e.data!==t&&(e.data=t)}function te(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function N(e,t,n){e.classList.toggle(t,!!n)}let fe;function ce(e){fe=e}function Ie(){if(!fe)throw new Error("Function called outside component initialization");return fe}function Ue(e){Ie().$$.on_mount.push(e)}function Ge(e){Ie().$$.on_destroy.push(e)}const oe=[],ye=[];let le=[];const ke=[],Je=Promise.resolve();let ge=!1;function Qe(){ge||(ge=!0,Je.then(Te))}function be(e){le.push(e)}const we=new Set;let ne=0;function Te(){if(ne!==0)return;const e=fe;do{try{for(;ne<oe.length;){const t=oe[ne];ne++,ce(t),We(t.$$)}}catch(t){throw oe.length=0,ne=0,t}for(ce(null),oe.length=0,ne=0;ye.length;)ye.pop()();for(let t=0;t<le.length;t+=1){const n=le[t];we.has(n)||(we.add(n),n())}le.length=0}while(oe.length);for(;ke.length;)ke.pop()();ge=!1,we.clear(),ce(e)}function We(e){if(e.fragment!==null){e.update(),ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(be)}}function Ze(e){const t=[],n=[];le.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),le=t}const xe=new Set;function De(e,t){e&&e.i&&(xe.delete(e),e.i(t))}function X(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function et(e,t){e.d(1),t.delete(e.key)}function tt(e,t,n,o,i,s,c,v,w,g,C,d){let f=e.length,b=s.length,M=f;const H={};for(;M--;)H[e[M].key]=M;const A=[],B=new Map,q=new Map,G=[];for(M=b;M--;){const k=d(i,s,M),R=n(k);let P=c.get(R);P?o&&G.push(()=>P.p(k,t)):(P=g(R,k),P.c()),B.set(R,A[M]=P),R in H&&q.set(R,Math.abs(M-H[R]))}const I=new Set,U=new Set;function L(k){De(k,1),k.m(v,C),c.set(k.key,k),C=k.first,b--}for(;f&&b;){const k=A[b-1],R=e[f-1],P=k.key,S=R.key;k===R?(C=k.first,f--,b--):B.has(S)?!c.has(P)||I.has(P)?L(k):U.has(S)?f--:q.get(P)>q.get(S)?(U.add(P),L(k)):(I.add(S),f--):(w(R,c),f--)}for(;f--;){const k=e[f];B.has(k.key)||w(k,c)}for(;b;)L(A[b-1]);return ie(G),A}function nt(e,t,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),be(()=>{const s=e.$$.on_mount.map(Pe).filter(ze);e.$$.on_destroy?e.$$.on_destroy.push(...s):ie(s),e.$$.on_mount=[]}),i.forEach(be)}function ot(e,t){const n=e.$$;n.fragment!==null&&(Ze(n.after_update),ie(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(e,t){e.$$.dirty[0]===-1&&(oe.push(e),Qe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function rt(e,t,n,o,i,s,c=null,v=[-1]){const w=fe;ce(e);const g=e.$$={fragment:null,ctx:[],props:s,update:re,not_equal:i,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(w?w.$$.context:[])),callbacks:ve(),dirty:v,skip_bound:!1,root:t.target||w.$$.root};c&&c(g.root);let C=!1;if(g.ctx=n?n(e,t.props||{},(d,f,...b)=>{const M=b.length?b[0]:f;return g.ctx&&i(g.ctx[d],g.ctx[d]=M)&&(!g.skip_bound&&g.bound[d]&&g.bound[d](M),C&&lt(e,d)),f}):[],g.update(),C=!0,ie(g.before_update),g.fragment=o?o(g.ctx):!1,t.target){if(t.hydrate){const d=He(t.target);g.fragment&&g.fragment.l(d),d.forEach(O)}else g.fragment&&g.fragment.c();t.intro&&De(e.$$.fragment),nt(e,t.target,t.anchor),Te()}ce(w)}class it{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){ot(this,1),this.$destroy=re}$on(t,n){if(!ze(n))return re;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!Ke(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const st="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(st);function Ce(e,t,n){const o=e.slice();return o[36]=t[n],o}function $e(e,t,n){const o=e.slice();return o[39]=t[n],o}function Me(e,t,n){const o=e.slice();return o[42]=t[n],o}function Re(e,t,n){const o=e.slice();return o[45]=t[n].tile,o[46]=t[n].row,o[47]=t[n].col,o}function Se(e,t,n){const o=e.slice();return o[50]=t[n],o}function Ne(e){let t,n,o;function i(){return e[16](e[50])}return{c(){t=V("button"),t.textContent=`${e[50]} ðŸ‘‘`,j(t,"class","svelte-1uedvde"),N(t,"selected",e[2]===e[50])},m(s,c){z(s,t,c),n||(o=ee(t,"click",i),n=!0)},p(s,c){e=s,c[0]&4&&N(t,"selected",e[2]===e[50])},d(s){s&&O(t),n=!1,o()}}}function Ee(e){let t,n=(e[45].crowns>0?e[45].crowns:"")+"",o,i,s,c,v,w;function g(){return e[17](e[45],e[46],e[47])}function C(...d){return e[18](e[45],e[46],e[47],...d)}return{c(){t=V("button"),o=Y(n),i=x(),j(t,"data-row",s=e[46]),j(t,"data-col",c=e[47]),j(t,"class","tile svelte-1uedvde"),N(t,"grass",e[45].terrain==="grass"),N(t,"water",e[45].terrain==="water"),N(t,"forest",e[45].terrain==="forest"),N(t,"wheat",e[45].terrain==="wheat"),N(t,"swamp",e[45].terrain==="swamp"),N(t,"mine",e[45].terrain==="mine"),N(t,"castle",e[12](e[46],e[47]))},m(d,f){z(d,t,f),F(t,o),F(t,i),v||(w=[ee(t,"click",g),ee(t,"pointerdown",C),ee(t,"pointermove",e[19]),ee(t,"pointerup",e[20])],v=!0)},p(d,f){e=d,f[0]&16&&n!==(n=(e[45].crowns>0?e[45].crowns:"")+"")&&ae(o,n),f[0]&16&&s!==(s=e[46])&&j(t,"data-row",s),f[0]&16&&c!==(c=e[47])&&j(t,"data-col",c),f[0]&16&&N(t,"grass",e[45].terrain==="grass"),f[0]&16&&N(t,"water",e[45].terrain==="water"),f[0]&16&&N(t,"forest",e[45].terrain==="forest"),f[0]&16&&N(t,"wheat",e[45].terrain==="wheat"),f[0]&16&&N(t,"swamp",e[45].terrain==="swamp"),f[0]&16&&N(t,"mine",e[45].terrain==="mine"),f[0]&4112&&N(t,"castle",e[12](e[46],e[47]))},d(d){d&&O(t),v=!1,ie(w)}}}function Oe(e){let t,n=X(e[42]),o=[];for(let i=0;i<n.length;i+=1)o[i]=Ee(Re(e,n,i));return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=Ye()},m(i,s){for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(i,s);z(i,t,s)},p(i,s){if(s[0]&7056){n=X(i[42]);let c;for(c=0;c<n.length;c+=1){const v=Re(i,n,c);o[c]?o[c].p(v,s):(o[c]=Ee(v),o[c].c(),o[c].m(t.parentNode,t))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}},d(i){i&&O(t),ue(o,i)}}}function Ae(e,t){let n,o=t[39]+"",i,s,c;function v(){return t[21](t[39])}return{key:e,first:null,c(){n=V("button"),i=Y(o),j(n,"class",Xe(t[39])+" svelte-1uedvde"),N(n,"selected",t[1]===t[39]),this.first=n},m(w,g){z(w,n,g),F(n,i),s||(c=ee(n,"click",v),s=!0)},p(w,g){t=w,g[0]&66&&N(n,"selected",t[1]===t[39])},d(w){w&&O(n),s=!1,c()}}}function Le(e){let t;return{c(){t=V("div"),t.textContent=`${e[36]}`},m(n,o){z(n,t,o)},p:re,d(n){n&&O(t)}}}function ct(e){let t,n,o,i,s,c,v,w=[],g=new Map,C,d,f,b,M,H,A,B,q,G,I,U,L,k,R,P=X([0,1,2,3]),S=[];for(let l=0;l<4;l+=1)S[l]=Ne(Se(e,P,l));let J=X(e[4]),$=[];for(let l=0;l<J.length;l+=1)$[l]=Oe(Me(e,J,l));let Z=X(["empty",...e[6]]);const se=l=>l[39];for(let l=0;l<Z.length;l+=1){let p=$e(e,Z,l),r=se(p);g.set(r,w[l]=Ae(r,p))}let Q=X(e[5]),E=[];for(let l=0;l<Q.length;l+=1)E[l]=Le(Ce(e,Q,l));return{c(){t=V("h1"),t.textContent="Kingdomino Scorer",n=x(),o=V("div");for(let l=0;l<4;l+=1)S[l].c();i=x(),s=V("div");for(let l=0;l<$.length;l+=1)$[l].c();c=x(),v=V("div");for(let l=0;l<w.length;l+=1)w[l].c();C=x(),d=V("p"),f=Y("Total Score: "),b=V("strong"),M=Y(e[3]),H=x(),A=V("button"),B=Y("Board Size: "),q=Y(e[0]),G=Y("Ã—"),I=Y(e[0]),U=x(),L=V("div");for(let l=0;l<E.length;l+=1)E[l].c();te(t,"text-align","center"),j(o,"class","crown-controls controls svelte-1uedvde"),j(s,"class","board svelte-1uedvde"),te(s,"grid-template-columns","repeat("+e[0]+", 1fr)"),j(v,"class","controls svelte-1uedvde"),te(A,"margin-left","20px"),j(A,"class","svelte-1uedvde"),te(d,"text-align","center"),te(d,"font-size","1.2rem"),j(L,"class","debug-log svelte-1uedvde")},m(l,p){z(l,t,p),z(l,n,p),z(l,o,p);for(let r=0;r<4;r+=1)S[r]&&S[r].m(o,null);z(l,i,p),z(l,s,p);for(let r=0;r<$.length;r+=1)$[r]&&$[r].m(s,null);z(l,c,p),z(l,v,p);for(let r=0;r<w.length;r+=1)w[r]&&w[r].m(v,null);z(l,C,p),z(l,d,p),F(d,f),F(d,b),F(b,M),F(d,H),F(d,A),F(A,B),F(A,q),F(A,G),F(A,I),z(l,U,p),z(l,L,p);for(let r=0;r<E.length;r+=1)E[r]&&E[r].m(L,null);k||(R=ee(A,"click",e[22]),k=!0)},p(l,p){if(p[0]&4){P=X([0,1,2,3]);let r;for(r=0;r<4;r+=1){const K=Se(l,P,r);S[r]?S[r].p(K,p):(S[r]=Ne(K),S[r].c(),S[r].m(o,null))}for(;r<4;r+=1)S[r].d(1)}if(p[0]&7056){J=X(l[4]);let r;for(r=0;r<J.length;r+=1){const K=Me(l,J,r);$[r]?$[r].p(K,p):($[r]=Oe(K),$[r].c(),$[r].m(s,null))}for(;r<$.length;r+=1)$[r].d(1);$.length=J.length}if(p[0]&1&&te(s,"grid-template-columns","repeat("+l[0]+", 1fr)"),p[0]&1090&&(Z=X(["empty",...l[6]]),w=tt(w,p,se,1,l,Z,g,v,et,Ae,null,$e)),p[0]&8&&ae(M,l[3]),p[0]&1&&ae(q,l[0]),p[0]&1&&ae(I,l[0]),p[0]&32){Q=X(l[5]);let r;for(r=0;r<Q.length;r+=1){const K=Ce(l,Q,r);E[r]?E[r].p(K,p):(E[r]=Le(K),E[r].c(),E[r].m(L,null))}for(;r<E.length;r+=1)E[r].d(1);E.length=Q.length}},i:re,o:re,d(l){l&&(O(t),O(n),O(o),O(i),O(s),O(c),O(v),O(C),O(d),O(U),O(L)),ue(S,l),ue($,l);for(let p=0;p<w.length;p+=1)w[p].d();ue(E,l),k=!1,R()}}}const D=13;function ft(e,t,n){let o,i=[],s=!1,c=null,v=null;function w(){s=!1,c=null,v=null}Ue(()=>{window.addEventListener("pointerup",w),window.addEventListener("pointercancel",w)}),Ge(()=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",w)});const g=["grass","water","forest","wheat","swamp","mine"];let C=Array.from({length:D},()=>Array.from({length:D},()=>({terrain:null,crowns:0}))),d=5,f={row:4,col:4},b={row:6,col:6};function M(u,a,_){R(a,_)?v={row:a,col:_}:(s=!0,c=I==="empty"?null:I,G(u,a,_))}function H(u){const a=document.elementFromPoint(u.clientX,u.clientY);if(!(a!=null&&a.dataset))return;const _=parseInt(a.dataset.row??""),m=parseInt(a.dataset.col??"");if(!(isNaN(_)||isNaN(m))){if(v){const h=_-v.row,y=m-v.col;A(b.row+h,b.col+y),v=null}s=!1,c=null}}function A(u,a){const _=u-b.row,m=a-b.col,h={row:f.row-_,col:f.col-m},{minRow:y,maxRow:T,minCol:W,maxCol:de}=$(),he=h.row,_e=h.row+d-1,me=h.col,Ve=h.col+d-1;return y>=he&&T<=_e&&W>=me&&de<=Ve?(n(15,f=h),B(),!0):!1}function B(){n(14,C=[...C]),n(3,Z=J())}function q(u){if(!s||c===null)return;const a=document.elementFromPoint(u.clientX,u.clientY);if(!(a!=null&&a.dataset))return;const _=parseInt(a.dataset.row??""),m=parseInt(a.dataset.col??"");if(isNaN(_)||isNaN(m))return;const h=C[_][m];G(h,_,m)}function G(u,a,_){R(a,_)||s&&c!==null&&(u.terrain=c,B())}let I="grass";function U(u){n(1,I=u)}let L=null;function k(u,a,_){R(a,_)||(u.terrain=I==="empty"?null:I,L!==null&&(u.crowns=L,n(2,L=null)),B())}function R(u,a){return u===b.row&&a===b.col}function P(){const{minRow:u,maxRow:a,minCol:_,maxCol:m}=$(),h=Math.floor((u+a)/2),y=Math.floor((_+m)/2),T=b.row===h&&b.col===y,W=a-u+1===d&&m-_+1===d;return T&&W}function S(){const{minRow:u,maxRow:a,minCol:_,maxCol:m}=$(),h=a-u+1===d&&m-_+1===d;for(let y=f.row;y<f.row+d;y++)for(let T=f.col;T<f.col+d;T++)if((y!==b.row||T!==b.col)&&C[y][T].terrain===null)return!1;return h}function J(){const u=Array.from({length:D},()=>Array(D).fill(!1));let a=0;function _(m,h,y){if(m<0||m>=D||h<0||h>=D||u[m][h]||C[m][h].terrain!==y)return[0,0];u[m][h]=!0;let T=1,W=C[m][h].crowns;for(const[de,he]of[[1,0],[-1,0],[0,1],[0,-1]]){const[_e,me]=_(m+de,h+he,y);T+=_e,W+=me}return[T,W]}for(let m=0;m<D;m++)for(let h=0;h<D;h++){const y=C[m][h];if(y.terrain&&!u[m][h]){const[T,W]=_(m,h,y.terrain);a+=T*W}}return a+=P()?10:0,a+=S()?5:0,a}function $(){let u=D,a=-1,_=D,m=-1;for(let h=0;h<D;h++)for(let y=0;y<D;y++)(C[h][y].terrain!==null||h===b.row&&y===b.col)&&(u=Math.min(u,h),a=Math.max(a,h),_=Math.min(_,y),m=Math.max(m,y));return{minRow:u,maxRow:a,minCol:_,maxCol:m}}let Z=0;function se(){if(d===5)n(0,d=7),f.row>0&&n(15,f.row-=1,f),f.col>0&&n(15,f.col-=1,f);else{const u=$();if(u.maxRow-u.minRow>=5||u.maxCol-u.minCol>=5)return;const a=u.maxRow<f.row+6?f.row+1:f.row,_=u.maxCol<f.col+6?f.col+1:f.col;n(15,f={row:a,col:_}),n(0,d=5)}}const Q=u=>n(2,L=u),E=(u,a,_)=>k(u,a,_),l=(u,a,_,m)=>M(u,a,_),p=u=>q(u),r=u=>H(u),K=u=>U(u),Fe=()=>se();return e.$$.update=()=>{e.$$.dirty[0]&49153&&n(4,o=Array.from({length:d},(u,a)=>Array.from({length:d},(_,m)=>{const h=f.row+a,y=f.col+m;return{tile:C[h][y],row:h,col:y}})))},[d,I,L,Z,o,i,g,M,H,q,U,k,R,se,C,f,Q,E,l,p,r,K,Fe]}class ut extends it{constructor(t){super(),rt(this,t,ft,ct,qe,{},null,[-1,-1])}}new ut({target:document.body});
