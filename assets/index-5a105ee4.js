var Te=Object.defineProperty;var De=(e,t,n)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ae=(e,t,n)=>(De(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function le(){}function Se(e){return e()}function we(){return Object.create(null)}function te(e){e.forEach(Se)}function Ne(e){return typeof e=="function"}function Fe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ve(e){return Object.keys(e).length===0}function Be(e){return e??""}function I(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function he(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function F(e){return document.createElement(e)}function V(e){return document.createTextNode(e)}function Z(){return V(" ")}function qe(){return V("")}function J(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function T(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ke(e){return Array.from(e.childNodes)}function ie(e,t){t=""+t,e.data!==t&&(e.data=t)}function Q(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function N(e,t,n){e.classList.toggle(t,!!n)}let re;function oe(e){re=e}function Ee(){if(!re)throw new Error("Function called outside component initialization");return re}function Xe(e){Ee().$$.on_mount.push(e)}function Ye(e){Ee().$$.on_destroy.push(e)}const x=[],pe=[];let ee=[];const ge=[],He=Promise.resolve();let _e=!1;function Ue(){_e||(_e=!0,He.then(Oe))}function me(e){ee.push(e)}const de=new Set;let W=0;function Oe(){if(W!==0)return;const e=re;do{try{for(;W<x.length;){const t=x[W];W++,oe(t),Ge(t.$$)}}catch(t){throw x.length=0,W=0,t}for(oe(null),x.length=0,W=0;pe.length;)pe.pop()();for(let t=0;t<ee.length;t+=1){const n=ee[t];de.has(n)||(de.add(n),n())}ee.length=0}while(x.length);for(;ge.length;)ge.pop()();_e=!1,de.clear(),oe(e)}function Ge(e){if(e.fragment!==null){e.update(),te(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(me)}}function Je(e){const t=[],n=[];ee.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ee=t}const Qe=new Set;function Ae(e,t){e&&e.i&&(Qe.delete(e),e.i(t))}function U(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function We(e,t){e.d(1),t.delete(e.key)}function Ze(e,t,n,o,l,r,s,k,p,h,b,c){let d=e.length,E=r.length,R=d;const Y={};for(;R--;)Y[e[R].key]=R;const S=[],B=new Map,D=new Map,j=[];for(R=E;R--;){const y=c(l,r,R),C=n(y);let M=s.get(C);M?o&&j.push(()=>M.p(y,t)):(M=h(C,y),M.c()),B.set(C,S[R]=M),C in Y&&D.set(C,Math.abs(R-Y[C]))}const q=new Set,P=new Set;function K(y){Ae(y,1),y.m(k,b),s.set(y.key,y),b=y.first,E--}for(;d&&E;){const y=S[E-1],C=e[d-1],M=y.key,$=C.key;y===C?(b=y.first,d--,E--):B.has($)?!s.has(M)||q.has(M)?K(y):P.has($)?d--:D.get(M)>D.get($)?(P.add(M),K(y)):(q.add($),d--):(p(C,s),d--)}for(;d--;){const y=e[d];B.has(y.key)||p(y,s)}for(;E;)K(S[E-1]);return te(j),S}function xe(e,t,n){const{fragment:o,after_update:l}=e.$$;o&&o.m(t,n),me(()=>{const r=e.$$.on_mount.map(Se).filter(Ne);e.$$.on_destroy?e.$$.on_destroy.push(...r):te(r),e.$$.on_mount=[]}),l.forEach(me)}function et(e,t){const n=e.$$;n.fragment!==null&&(Je(n.after_update),te(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(e,t){e.$$.dirty[0]===-1&&(x.push(e),Ue(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function nt(e,t,n,o,l,r,s=null,k=[-1]){const p=re;oe(e);const h=e.$$={fragment:null,ctx:[],props:r,update:le,not_equal:l,bound:we(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:we(),dirty:k,skip_bound:!1,root:t.target||p.$$.root};s&&s(h.root);let b=!1;if(h.ctx=n?n(e,t.props||{},(c,d,...E)=>{const R=E.length?E[0]:d;return h.ctx&&l(h.ctx[c],h.ctx[c]=R)&&(!h.skip_bound&&h.bound[c]&&h.bound[c](R),b&&tt(e,c)),d}):[],h.update(),b=!0,te(h.before_update),h.fragment=o?o(h.ctx):!1,t.target){if(t.hydrate){const c=Ke(t.target);h.fragment&&h.fragment.l(c),c.forEach(O)}else h.fragment&&h.fragment.c();t.intro&&Ae(e.$$.fragment),xe(e,t.target,t.anchor),Oe()}oe(p)}class ot{constructor(){ae(this,"$$");ae(this,"$$set")}$destroy(){et(this,1),this.$destroy=le}$on(t,n){if(!Ne(n))return le;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(t){this.$$set&&!Ve(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const lt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(lt);function be(e,t,n){const o=e.slice();return o[36]=t[n],o}function ye(e,t,n){const o=e.slice();return o[39]=t[n],o}function ve(e,t,n){const o=e.slice();return o[42]=t[n].tile,o[43]=t[n].row,o[44]=t[n].col,o}function ke(e,t,n){const o=e.slice();return o[47]=t[n],o}function Ce(e){let t,n,o;function l(){return e[15](e[47])}return{c(){t=F("button"),t.textContent=`${e[47]} ðŸ‘‘`,T(t,"class","svelte-ghejff"),N(t,"selected",e[2]===e[47])},m(r,s){L(r,t,s),n||(o=J(t,"click",l),n=!0)},p(r,s){e=r,s[0]&4&&N(t,"selected",e[2]===e[47])},d(r){r&&O(t),n=!1,o()}}}function $e(e){let t,n=(e[42].crowns>0?e[42].crowns:"")+"",o,l,r,s,k,p;function h(){return e[16](e[42],e[43],e[44])}function b(...c){return e[17](e[42],e[43],e[44],...c)}return{c(){t=F("button"),o=V(n),l=Z(),T(t,"data-row",r=e[43]),T(t,"data-col",s=e[44]),T(t,"class","tile svelte-ghejff"),N(t,"grass",e[42].terrain==="grass"),N(t,"water",e[42].terrain==="water"),N(t,"forest",e[42].terrain==="forest"),N(t,"wheat",e[42].terrain==="wheat"),N(t,"swamp",e[42].terrain==="swamp"),N(t,"mine",e[42].terrain==="mine"),N(t,"castle",e[11](e[43],e[44]))},m(c,d){L(c,t,d),I(t,o),I(t,l),k||(p=[J(t,"click",h),J(t,"pointerdown",b),J(t,"pointermove",e[18]),J(t,"pointerup",e[19])],k=!0)},p(c,d){e=c,d[0]&16&&n!==(n=(e[42].crowns>0?e[42].crowns:"")+"")&&ie(o,n),d[0]&16&&r!==(r=e[43])&&T(t,"data-row",r),d[0]&16&&s!==(s=e[44])&&T(t,"data-col",s),d[0]&16&&N(t,"grass",e[42].terrain==="grass"),d[0]&16&&N(t,"water",e[42].terrain==="water"),d[0]&16&&N(t,"forest",e[42].terrain==="forest"),d[0]&16&&N(t,"wheat",e[42].terrain==="wheat"),d[0]&16&&N(t,"swamp",e[42].terrain==="swamp"),d[0]&16&&N(t,"mine",e[42].terrain==="mine"),d[0]&2064&&N(t,"castle",e[11](e[43],e[44]))},d(c){c&&O(t),k=!1,te(p)}}}function Me(e){let t,n=U(e[39]),o=[];for(let l=0;l<n.length;l+=1)o[l]=$e(ve(e,n,l));return{c(){for(let l=0;l<o.length;l+=1)o[l].c();t=qe()},m(l,r){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(l,r);L(l,t,r)},p(l,r){if(r[0]&3536){n=U(l[39]);let s;for(s=0;s<n.length;s+=1){const k=ve(l,n,s);o[s]?o[s].p(k,r):(o[s]=$e(k),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(l){l&&O(t),he(o,l)}}}function Re(e,t){let n,o=t[36]+"",l,r,s;function k(){return t[20](t[36])}return{key:e,first:null,c(){n=F("button"),l=V(o),T(n,"class",Be(t[36])+" svelte-ghejff"),N(n,"selected",t[1]===t[36]),this.first=n},m(p,h){L(p,n,h),I(n,l),r||(s=J(n,"click",k),r=!0)},p(p,h){t=p,h[0]&34&&N(n,"selected",t[1]===t[36])},d(p){p&&O(n),r=!1,s()}}}function rt(e){let t,n,o,l,r,s,k,p=[],h=new Map,b,c,d,E,R,Y,S,B,D,j,q,P,K,y=U([0,1,2,3]),C=[];for(let i=0;i<4;i+=1)C[i]=Ce(ke(e,y,i));let M=U(e[4]),$=[];for(let i=0;i<M.length;i+=1)$[i]=Me(ye(e,M,i));let X=U(["empty",...e[5]]);const ne=i=>i[36];for(let i=0;i<X.length;i+=1){let g=be(e,X,i),u=ne(g);h.set(u,p[i]=Re(u,g))}return{c(){t=F("h1"),t.textContent="Kingdomino Scorer",n=Z(),o=F("div");for(let i=0;i<4;i+=1)C[i].c();l=Z(),r=F("div");for(let i=0;i<$.length;i+=1)$[i].c();s=Z(),k=F("div");for(let i=0;i<p.length;i+=1)p[i].c();b=Z(),c=F("p"),d=V("Total Score: "),E=F("strong"),R=V(e[3]),Y=Z(),S=F("button"),B=V("Board Size: "),D=V(e[0]),j=V("Ã—"),q=V(e[0]),Q(t,"text-align","center"),T(o,"class","crown-controls controls svelte-ghejff"),T(r,"class","board svelte-ghejff"),Q(r,"--board-size",e[0]),T(k,"class","controls svelte-ghejff"),Q(S,"margin-left","20px"),T(S,"class","svelte-ghejff"),Q(c,"text-align","center"),Q(c,"font-size","1.2rem")},m(i,g){L(i,t,g),L(i,n,g),L(i,o,g);for(let u=0;u<4;u+=1)C[u]&&C[u].m(o,null);L(i,l,g),L(i,r,g);for(let u=0;u<$.length;u+=1)$[u]&&$[u].m(r,null);L(i,s,g),L(i,k,g);for(let u=0;u<p.length;u+=1)p[u]&&p[u].m(k,null);L(i,b,g),L(i,c,g),I(c,d),I(c,E),I(E,R),I(c,Y),I(c,S),I(S,B),I(S,D),I(S,j),I(S,q),P||(K=J(S,"click",e[21]),P=!0)},p(i,g){if(g[0]&4){y=U([0,1,2,3]);let u;for(u=0;u<4;u+=1){const G=ke(i,y,u);C[u]?C[u].p(G,g):(C[u]=Ce(G),C[u].c(),C[u].m(o,null))}for(;u<4;u+=1)C[u].d(1)}if(g[0]&3536){M=U(i[4]);let u;for(u=0;u<M.length;u+=1){const G=ye(i,M,u);$[u]?$[u].p(G,g):($[u]=Me(G),$[u].c(),$[u].m(r,null))}for(;u<$.length;u+=1)$[u].d(1);$.length=M.length}g[0]&1&&Q(r,"--board-size",i[0]),g[0]&546&&(X=U(["empty",...i[5]]),p=Ze(p,g,ne,1,i,X,h,k,We,Re,null,be)),g[0]&8&&ie(R,i[3]),g[0]&1&&ie(D,i[0]),g[0]&1&&ie(q,i[0])},i:le,o:le,d(i){i&&(O(t),O(n),O(o),O(l),O(r),O(s),O(k),O(b),O(c)),he(C,i),he($,i);for(let g=0;g<p.length;g+=1)p[g].d();P=!1,K()}}}const z=13;function it(e,t,n){let o,l=!1,r=null,s=null;function k(){l=!1,r=null,s=null}Xe(()=>{window.addEventListener("pointerup",k),window.addEventListener("pointercancel",k)}),Ye(()=>{window.removeEventListener("pointerup",k),window.removeEventListener("pointercancel",k)});const p=["grass","water","forest","wheat","swamp","mine"];let h=Array.from({length:z},()=>Array.from({length:z},()=>({terrain:null,crowns:0}))),b=5,c={row:4,col:4},d={row:6,col:6};function E(f,a,m){y(a,m)?s={row:a,col:m}:(l=!0,r=j==="empty"?null:j,D(f,a,m))}function R(f){const a=document.elementFromPoint(f.clientX,f.clientY);if(!(a!=null&&a.dataset))return;const m=parseInt(a.dataset.row??""),w=parseInt(a.dataset.col??"");if(!(isNaN(m)||isNaN(w))){if(s){const _=m-s.row,v=w-s.col;Y(d.row+_,d.col+v),s=null}l=!1,r=null}}function Y(f,a){const m=f-d.row,w=a-d.col,_={row:c.row-m,col:c.col-w},{minRow:v,maxRow:A,minCol:H,maxCol:se}=X(),ce=_.row,fe=_.row+b-1,ue=_.col,Ie=_.col+b-1;return v>=ce&&A<=fe&&H>=ue&&se<=Ie?(n(14,c=_),S(),!0):!1}function S(){n(13,h=[...h]),n(3,ne=$())}function B(f){if(!l||r===null)return;const a=document.elementFromPoint(f.clientX,f.clientY);if(!(a!=null&&a.dataset))return;const m=parseInt(a.dataset.row??""),w=parseInt(a.dataset.col??"");if(isNaN(m)||isNaN(w))return;const _=h[m][w];D(_,m,w)}function D(f,a,m){y(a,m)||l&&r!==null&&(f.terrain=r,S())}let j="grass";function q(f){n(1,j=f)}let P=null;function K(f,a,m){y(a,m)||(P!==null?(f.crowns=P,n(2,P=null)):f.terrain=j==="empty"?null:j,S())}function y(f,a){return f===d.row&&a===d.col}function C(){const{minRow:f,maxRow:a,minCol:m,maxCol:w}=X(),_=Math.floor((f+a)/2),v=Math.floor((m+w)/2),A=d.row===_&&d.col===v,H=a-f+1===b&&w-m+1===b;return A&&H}function M(){const{minRow:f,maxRow:a,minCol:m,maxCol:w}=X(),_=a-f+1===b&&w-m+1===b;for(let v=c.row;v<c.row+b;v++)for(let A=c.col;A<c.col+b;A++)if((v!==d.row||A!==d.col)&&h[v][A].terrain===null)return!1;return _}function $(){const f=Array.from({length:z},()=>Array(z).fill(!1));let a=0;function m(w,_,v){if(w<0||w>=z||_<0||_>=z||f[w][_]||h[w][_].terrain!==v)return[0,0];f[w][_]=!0;let A=1,H=h[w][_].crowns;for(const[se,ce]of[[1,0],[-1,0],[0,1],[0,-1]]){const[fe,ue]=m(w+se,_+ce,v);A+=fe,H+=ue}return[A,H]}for(let w=0;w<z;w++)for(let _=0;_<z;_++){const v=h[w][_];if(v.terrain&&!f[w][_]){const[A,H]=m(w,_,v.terrain);a+=A*H}}return a+=C()?10:0,a+=M()?5:0,a}function X(){let f=z,a=-1,m=z,w=-1;for(let _=0;_<z;_++)for(let v=0;v<z;v++)(h[_][v].terrain!==null||_===d.row&&v===d.col)&&(f=Math.min(f,_),a=Math.max(a,_),m=Math.min(m,v),w=Math.max(w,v));return{minRow:f,maxRow:a,minCol:m,maxCol:w}}let ne=0;function i(){if(b===5)n(0,b=7),c.row>0&&n(14,c.row-=1,c),c.col>0&&n(14,c.col-=1,c);else{const f=X();if(f.maxRow-f.minRow>=5||f.maxCol-f.minCol>=5)return;const a=f.maxRow<c.row+6?c.row+1:c.row,m=f.maxCol<c.col+6?c.col+1:c.col;n(14,c={row:a,col:m}),n(0,b=5)}}const g=f=>n(2,P=f),u=(f,a,m)=>K(f,a,m),G=(f,a,m,w)=>E(f,a,m),Le=f=>B(f),je=f=>R(f),Pe=f=>q(f),ze=()=>i();return e.$$.update=()=>{e.$$.dirty[0]&24577&&n(4,o=Array.from({length:b},(f,a)=>Array.from({length:b},(m,w)=>{const _=c.row+a,v=c.col+w;return{tile:h[_][v],row:_,col:v}})))},[b,j,P,ne,o,p,E,R,B,q,K,y,i,h,c,g,u,G,Le,je,Pe,ze]}class st extends ot{constructor(t){super(),nt(this,t,it,rt,Fe,{},null,[-1,-1])}}new st({target:document.body});
